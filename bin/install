#!/usr/bin/env bash

set -euo pipefail
gcs_bucket_name=cloud-sdk-release
gcs_object_os=""
os_support_error="ðŸš¨  Script only supports macOS and Ubuntu"

# url=https://storage.googleapis.com/cloud-sdk-release
install() {
    printf "Install specified GCloud CLI version\\n"
    printf "type: %s" "${ASDF_INSTALL_TYPE}"
    printf "version: %s" "${ASDF_INSTALL_VERSION}"
    printf "type: %s" "${ASDF_INSTALL_PATH}"

    # get os
    osType="$(uname -s)"

    # create object name
    case "${osType}" in
    Linux*)
        gcs_object_os="linux"
        ;;
    Darwin*)
        gcs_object_os="darwin"
        ;;
    *)
        printf "%s\\n" "${os_support_error}"
        exit 1
        ;;
    esac

    gcs_object="google-cloud-sdk-${ASDF_INSTALL_VERSION}-${gcs_object_os}-x68_64.tar.gz"

    # download file for version & os
    curl \
        "https://storage.googleapis.com/storage/v1/b/${gcs_bucket_name}/o/${gcs_object}" \
        --compressed
    mkdir test
    unzip gcs_object.tar.gz -d test/

    # extract to asdf plugin location for the version
    # run the intall.sh script to add to path etc?
}

install

# google-cloud-sdk-282.0.0-linux-x86_64.tar.gz

# https://dl.google.com/dl/cloudsdk/release/google-cloud-sdk.tar.gz
# https://dl.google.com/dl/cloudsdk/channels/rapid/downloads/google-cloud-sdk-282.0.0-linux-x86_64.tar.gz

# archive
# https://storage.googleapis.com/cloud-sdk-release
